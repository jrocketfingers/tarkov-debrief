(this.webpackJsonpdebrief=this.webpackJsonpdebrief||[]).push([[0],{104:function(e,t){},105:function(e,t){},106:function(e,t){},216:function(e,t,c){},217:function(e,t,c){},218:function(e,t,c){},221:function(e,t,c){"use strict";c.r(t);var n=c(3),a=c(0),i=c.n(a),s=c(85),r=c.n(s),o=(c(98),c(55)),l=c.n(o),u=c(86),d=c(9),b=c(14),j=c(23),p=c(92),h=(c(215),c(216),c(217),c(18)),m=(c(218),c.p+"static/media/customs.e4219f37.png"),f=c.p+"static/media/interchange.d1c1fd49.png",g=c.p+"static/media/woods.1db93aa7.png",O=c.p+"static/media/labs.bf97da17.jpg",v=c.p+"static/media/reserve.074ec021.png",x=c.p+"static/media/shoreline.23bac9da.png",C=c.p+"static/media/factory.87c85dcc.jpg",k=c.p+"static/media/customs-thumbnail.b02c6216.png",w=c.p+"static/media/interchange-thumbnail.20071bd5.png",y=c.p+"static/media/woods-thumbnail.70d05156.png",D=c.p+"static/media/labs-thumbnail.b903d684.png",M=c.p+"static/media/reserve-thumbnail.a98054b0.png",N=c.p+"static/media/shoreline-thumbnail.2a773a10.png",P=c.p+"static/media/factory-thumbnail.c6017793.png",S={customs:m,interchange:f,woods:g,labs:O,reserve:v,shoreline:x,factory:C},L={customs:k,interchange:w,woods:y,labs:D,reserve:M,shoreline:N,factory:P};var A,B=function(){return Object(n.jsxs)("div",{className:"MapSelector",children:[Object(n.jsx)("header",{className:"App-header",children:Object(n.jsx)(h.b,{className:"App-header-title",to:"/",children:"Tarkov Debrief"})}),Object(n.jsx)("section",{className:"MapList",children:Object.entries(S).map((function(e){var t=Object(b.a)(e,2),c=t[0];t[1];return Object(n.jsxs)(h.b,{className:"MapList-Card",to:"/app/".concat(c),children:[Object(n.jsx)("img",{src:L[c],alt:"key"}),Object(n.jsx)("p",{children:c})]})}))})]})},E=c.p+"static/media/select.87afa2df.svg",R=c.p+"static/media/pencil.e46769b8.svg",T=c.p+"static/media/eraser.fa7a8623.svg",F=c.p+"static/media/undo.d1789e03.svg",I=c.p+"static/media/marker.bde95ba7.svg",z=c.p+"static/media/save.701089e7.svg",U=c.p+"static/media/pmc-thick.9fc764b6.svg",H=c.p+"static/media/pmc-med.e46af3bd.svg",J=c.p+"static/media/pmc-light.f8f79686.svg",Y=c.p+"static/media/scav.231f3e54.svg",Z=c(5),K={width:300,height:300},W=new Set;var X={},q="#f00";function G(e){var t=e.title,c=e.children;return Object(n.jsxs)("div",{className:"sidebar-section",children:[Object(n.jsx)("h1",{className:"sidebar-section-title",children:t}),Object(n.jsx)("div",{className:"sidebar-section-content",children:c})]})}var Q=function(){var e=Object(Z.f)().map,t=Object(a.useRef)(null),c=Object(a.useState)({type:"pencil",active:!0,onClick:null,cursor:null}),i=Object(b.a)(c,2),s=i[0],r=i[1],o=Object(a.useRef)({type:"pencil",active:!0,onClick:null,cursor:null}),m=Object(a.useState)(q),f=Object(b.a)(m,2),g=f[0],O=f[1],v=Object(a.useState)(null),x=Object(b.a)(v,2)[1],C=Object(a.useRef)(null),k=Object(a.useState)(null),w=Object(b.a)(k,2),y=w[0],D=w[1],M=Object(a.useState)(!1),N=Object(b.a)(M,2),P=N[0],L=N[1],B=function(e){y&&(s.onClick&&y.off("mouse:up",s.onClick),e.onClick&&y.on("mouse:up",e.onClick),null===e.cursor?(y.defaultCursor="auto",y.hoverCursor="auto"):(y.defaultCursor=e.cursor,y.hoverCursor=y.defaultCursor),"pencil"===e.type?y.isDrawingMode=!0:y.isDrawingMode=!1),L(!1),r(e),o.current=e},Q=function(e){var t,c=e.target;t=c.src,x(t),C.current=t;var n="url(".concat(c.src,"), auto");B(Object(d.a)(Object(d.a)({},s),{},{type:"marker",onClick:V,cursor:n}))},V=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,a,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C||!C.current){e.next=17;break}if(c=X[C.current]){e.next=8;break}return e.next=5,new Promise((function(e){return j.fabric.Image.fromURL(C.current,e)}));case 5:n=e.sent,X[C.current]=n,c=n;case 8:return e.next=10,new Promise((function(e){return c.clone(e)}));case 10:a=e.sent,i=y.getPointer(t.e),a.left=i.x,a.top=i.y,s=y.getZoom(),a.scale(1/s),y.add(a);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(!y){var c=function(){var e=new j.fabric.Canvas("canvas",{height:K.height,width:K.width,perPixelTargetFind:!0,selection:!1});return e.freeDrawingBrush.color=q,e.freeDrawingBrush.width=5,e.setCursor("url(".concat(R,")")),e}();D(c),j.fabric.Image.fromURL(S[e],(function(e){e.canvas=c,e.selectable=!1,A=e,W.add(A.getSrc()),c.add(e),c.clearHistory()})),c.on("mouse:down",(function(e){B(Object(d.a)(Object(d.a)({},o.current),{},{active:!0}))})),c.on("mouse:up",(function(e){B(Object(d.a)(Object(d.a)({},o.current),{},{active:!1}))})),c.on("mouse:move",(function(e){null!==e.target&&(e.target instanceof j.fabric.Image&&W.has(e.target.getSrc())||"eraser"===o.current.type&&o.current.active&&c.remove(e.target))})),c.on("mouse:wheel",(function(e){var t=e.e,n=t.deltaY,a=c.getZoom();(a*=Math.pow(.999,n))>20&&(a=20),a<.01&&(a=.01),c.zoomToPoint({x:t.offsetX,y:t.offsetY},a),c.freeDrawingBrush.width=5/a,e.e.preventDefault(),e.e.stopPropagation()}))}function n(){if(t.current){var e=t.current.offsetWidth,c=t.current.offsetHeight;null===y||void 0===y||y.setDimensions({width:e,height:c})}else null===y||void 0===y||y.setDimensions(K)}return n(),window.addEventListener("resize",n),document.addEventListener("keyup",(function(e){var t=e.key;e.ctrlKey&&"z"===t&&y&&y.undo()})),function(){window.removeEventListener("resize",n)}}),[t,y]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("header",{className:"App-header",children:[Object(n.jsx)(h.b,{className:"App-header-title",to:"/",children:"Tarkov Debrief"}),Object(n.jsxs)("section",{className:"App-header-buttons",children:[Object(n.jsx)("button",{onClick:function(){B(Object(d.a)(Object(d.a)({},s),{},{type:"select",cursor:null,onClick:null})),y&&(y.isDrawingMode=!1,y.selection=!0)},children:Object(n.jsx)("img",{src:E,alt:"select"})}),Object(n.jsx)("button",{onClick:function(){B(Object(d.a)(Object(d.a)({},s),{},{type:"pencil",cursor:null,onClick:null})),y&&(y.isDrawingMode=!0)},children:Object(n.jsx)("img",{src:R,alt:"pencil"})}),Object(n.jsx)("button",{onClick:function(){B(Object(d.a)(Object(d.a)({},s),{},{type:"eraser",cursor:null,onClick:null})),y&&(y.isDrawingMode=!1,y.selection=!1)},children:Object(n.jsx)("img",{src:T,alt:"eraser"})}),Object(n.jsx)("button",{onClick:function(){y&&y.undo()},children:Object(n.jsx)("img",{src:F,alt:"undo"})}),Object(n.jsx)("button",{onClick:function(){L(!0)},children:Object(n.jsx)("img",{src:I,alt:"undo"})}),Object(n.jsx)("button",{onClick:function(){y&&function(e,t){var c=document.createElement("a");c.download=t,c.href=e,document.body.appendChild(c),c.click(),document.body.removeChild(c)}(y.toDataURL({multiplier:3}),"startegy.png")},children:Object(n.jsx)("img",{className:"App-header-buttons-save",src:z,alt:"save"})})]})]}),Object(n.jsxs)("aside",{className:P?"enter":"",children:[Object(n.jsx)("section",{onClick:function(){L(!1)},id:"closeArea"}),Object(n.jsxs)("section",{id:"sidebar",children:[Object(n.jsxs)(G,{title:"Markers",children:[Object(n.jsx)("button",{onClick:Q,children:Object(n.jsx)("img",{src:U,alt:"thick PMC"})}),Object(n.jsx)("button",{onClick:Q,children:Object(n.jsx)("img",{src:H,alt:"medium PMC"})}),Object(n.jsx)("button",{onClick:Q,children:Object(n.jsx)("img",{src:J,alt:"light PMC"})}),Object(n.jsx)("button",{onClick:Q,children:Object(n.jsx)("img",{src:Y,alt:"light PMC"})})]}),Object(n.jsx)(G,{title:"",children:Object(n.jsx)(p.a,{color:g,triangle:"hide",onChangeComplete:function(e){O(e.hex),y&&(y.freeDrawingBrush.color=e.hex)}})})]})]}),Object(n.jsx)("div",{className:"Canvas",ref:t,children:Object(n.jsx)("canvas",{id:"canvas"})})]})},V=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,223)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),i(e),s(e)}))};r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(h.a,{children:Object(n.jsxs)(Z.c,{children:[Object(n.jsx)(Z.a,{path:"/app/:map",children:Object(n.jsx)(Q,{})}),Object(n.jsx)(Z.a,{path:"/",children:Object(n.jsx)(B,{})})]})})}),document.getElementById("root")),V()},98:function(e,t,c){}},[[221,1,2]]]);
//# sourceMappingURL=main.493c47fc.chunk.js.map