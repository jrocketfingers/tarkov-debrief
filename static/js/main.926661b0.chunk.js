(this.webpackJsonpdebrief=this.webpackJsonpdebrief||[]).push([[0],{100:function(e,t,n){},105:function(e,t){},106:function(e,t){},107:function(e,t){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),a=n(86),r=n.n(a),s=n(59),o=(n(100),n(20)),u=n(16),l=n(93),d=n(5),f=n(18),b=(n(214),n(215),n(216),n(217),n.p+"static/media/customs.e4219f37.png"),j=n.p+"static/media/interchange.d1c1fd49.png",h=n.p+"static/media/woods.1db93aa7.png",m=n.p+"static/media/labs.bf97da17.jpg",p=n.p+"static/media/reserve.074ec021.png",v=n.p+"static/media/shoreline.23bac9da.png",g=n.p+"static/media/factory.87c85dcc.jpg",O=n.p+"static/media/customs-thumbnail.b02c6216.png",x=n.p+"static/media/interchange-thumbnail.20071bd5.png",C=n.p+"static/media/woods-thumbnail.70d05156.png",w=n.p+"static/media/labs-thumbnail.b903d684.png",k=n.p+"static/media/reserve-thumbnail.a98054b0.png",y=n.p+"static/media/shoreline-thumbnail.2a773a10.png",N=n.p+"static/media/factory-thumbnail.c6017793.png",D=n(3),E={customs:b,interchange:j,woods:h,labs:m,reserve:p,shoreline:v,factory:g},M={customs:O,interchange:x,woods:C,labs:w,reserve:k,shoreline:y,factory:N};var P,L,S=function(){return Object(D.jsxs)("div",{className:"MapSelector",children:[Object(D.jsx)("header",{className:"App-header",children:Object(D.jsx)(f.b,{className:"App-header-title",to:"/",children:"Tarkov Debrief"})}),Object(D.jsx)("section",{className:"MapList",children:Object.entries(E).map((function(e){var t=Object(o.a)(e,2),n=t[0];t[1];return Object(D.jsxs)(f.b,{className:"MapList-Card",to:"/app/".concat(n),children:[Object(D.jsx)("img",{src:M[n],alt:"key"}),Object(D.jsx)("p",{children:n})]},n)}))})]})},A=n.p+"static/media/select.a36d8019.svg",U=n.p+"static/media/pencil.6f256236.svg",B=n.p+"static/media/eraser.fa7a8623.svg",I=n.p+"static/media/undo.ccba6760.svg",T=n.p+"static/media/marker.79266f62.svg",z=n.p+"static/media/save.d3fc937a.svg",F=function(e){var t;e.ctrlKey&&"z"===e.key&&(null===(t=P)||void 0===t||t.undo())},R=function(){var e;null===(e=P)||void 0===e||e.undo()},H=function(){R()},J=n.p+"static/media/pmc-thick.e7585799.svg",K=n.p+"static/media/pmc-med.bd966230.svg",Y=n.p+"static/media/pmc-light.10d08880.svg",Z=n.p+"static/media/scav.c41c1ff5.svg";!function(e){e.select="select",e.pencil="pencil",e.eraser="eraser",e.marker="marker",e.pan="pan"}(L||(L={}));var W,X,q,G,Q,V,$,_,ee,te,ne,ce,ie,ae,re,se,oe,ue=n(9),le=function(){q(Object(ue.a)(Object(ue.a)({},X),{},{type:L.select,cursor:null}))},de=function(){V(Object(ue.a)(Object(ue.a)({},Q),{},{type:L.pencil,cursor:null}))},fe=function(e){if(G){var t=G;$(e.hex),t&&(t.freeDrawingBrush.color=e.hex)}},be=!1,je=function(){te(Object(ue.a)(Object(ue.a)({},ee),{},{type:L.eraser,cursor:null}))},he=function(e){if(ee.type===L.eraser&&void 0!==e.target&&be){var t;if(e.target instanceof u.fabric.Image&&ne.has(e.target.getSrc()))return;null===(t=_)||void 0===t||t.remove(e.target)}},me=function(){be=!0},pe=function(){be=!1},ve=n(58),ge=n.n(ve),Oe=n(92),xe={},Ce=function(e){var t=e.target;re=t.src;var n="url(".concat(re,"), auto");se&&(se.defaultCursor=n,se.hoverCursor=n),ce(Object(ue.a)(Object(ue.a)({},ie),{},{type:L.marker})),ae(!1)},we=function(){var e=Object(Oe.a)(ge.a.mark((function e(t){var n,c,i,a,r,s;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se){e.next=2;break}return e.abrupt("return");case 2:if(n=se,!t.e.altKey){e.next=5;break}return e.abrupt("return");case 5:if(c=xe[re]){e.next=12;break}return e.next=9,new Promise((function(e){return u.fabric.Image.fromURL(re,e)}));case 9:i=e.sent,xe[re]=i,c=i;case 12:return e.next=14,new Promise((function(e){return c.clone(e)}));case 14:a=e.sent,r=n.getPointer(t.e),a.left=r.x,a.top=r.y,s=n.getZoom(),a.scale(1/s),n.add(a);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke={width:300,height:300},ye=new Set;var Ne="#f00";function De(e){var t=e.title,n=e.children;return Object(D.jsxs)("div",{className:"sidebar-section",children:[Object(D.jsx)("h1",{className:"sidebar-section-title",children:t}),Object(D.jsx)("div",{className:"sidebar-section-content",children:n})]})}var Ee=function(){var e=Object(d.f)().map,t=Object(c.useRef)(null),n=Object(c.useRef)(null),i=Object(c.useState)({type:L.pencil,active:!1,cursor:null}),a=Object(o.a)(i,2),r=a[0],s=a[1];console.log("rerender");var b,j,h=Object(c.useState)(Ne),m=Object(o.a)(h,2),p=m[0],v=m[1],g=Object(c.useState)(null),O=Object(o.a)(g,2),x=O[0],C=O[1],w=Object(c.useState)(!1),k=Object(o.a)(w,2),y=k[0],N=k[1],M=(W=b=x,q=j=s,X=r,Object(c.useEffect)((function(){if(X.type===L.select&&W)return W.selection=!0,function(){W&&(W.selection=!1)}}),[X,j,b]),{onChoice:le}).onChoice,S=function(e,t,n,i){return G=e,V=t,Q=n,$=i,Object(c.useEffect)((function(){if(n.type===L.pencil&&G)return G.isDrawingMode=!0,function(){G&&(G.isDrawingMode=!1)}}),[n,e]),{onChoice:de,onColorChoice:fe}}(x,s,r,v),re=S.onChoice,ue=S.onColorChoice,ve=function(e,t,n,i){return _=e,te=t,ee=n,ne=i,Object(c.useEffect)((function(){if(ee.type===L.eraser&&_)return _.on("mouse:move",he),_.on("mouse:down",me),_.on("mouse:up",pe),_.selection=!1,function(){_&&(_.off("mouse:move",he),_.off("mouse:move",me),_.off("mouse:move",pe),be=!1)}}),[n,e]),{onChoice:je,onUse:he}}(x,s,r,ye).onChoice,ge=function(e,t){return P=e,Object(c.useEffect)((function(){var e=t.current;return null===e||void 0===e||e.addEventListener("keydown",F),function(){null===e||void 0===e||e.removeEventListener("keydown",F)}}),[t]),{onUse:R,onChoice:H}}(x,n).onUse,Oe=function(e,t,n,i){return ie=n,ce=i,ae=t,se=e,Object(c.useEffect)((function(){if(e&&n.type===L.marker)return e.on("mouse:down",we),function(){e.off("mouse:down",we),e.defaultCursor="auto",e.hoverCursor="auto"}}),[n,e]),{onChoice:Ce}}(x,N,r,s).onChoice;return function(e,t){Object(c.useEffect)((function(){if(e){var n=e;n.on("mouse:wheel",(function(e){var c=e.e,i=c.deltaY,a=n.getZoom();(a*=Math.pow(.999,i))>20&&(a=20),a<.01&&(a=.01),n.zoomToPoint({x:c.offsetX,y:c.offsetY},a),n.freeDrawingBrush.width=t/a,e.e.preventDefault(),e.e.stopPropagation()}))}}),[t,e])}(x,5),Object(c.useEffect)((function(){C(function(){var e=new u.fabric.Canvas("canvas",{height:ke.height,width:ke.width,isDrawingMode:!0,perPixelTargetFind:!0,selection:!1});return e.freeDrawingBrush.color=Ne,e.freeDrawingBrush.width=5,e.setCursor("url(".concat(U,")")),e}())}),[]),Object(c.useEffect)((function(){var n;if(x){var c=x;return u.fabric.Image.fromURL(E[e],(function(e){(n=e).canvas=c,n.selectable=!1,oe=n,ye.add(oe.getSrc()),c.add(n),c.clearHistory()})),i(),window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}}function i(){if(t.current){var e=t.current.offsetWidth,n=t.current.offsetHeight;null===x||void 0===x||x.setDimensions({width:e,height:n})}else null===x||void 0===x||x.setDimensions(ke)}}),[e,x]),Object(D.jsxs)("div",{className:"App",ref:n,children:[Object(D.jsxs)("header",{className:"App-header",children:[Object(D.jsx)(f.b,{className:"App-header-title",to:"/",children:"Tarkov Debrief"}),Object(D.jsxs)("section",{className:"App-header-buttons",children:[Object(D.jsx)("button",{onClick:M,children:Object(D.jsx)("img",{src:A,alt:"select"})}),Object(D.jsx)("button",{onClick:re,children:Object(D.jsx)("img",{src:U,alt:"pencil"})}),Object(D.jsx)("button",{onClick:ve,children:Object(D.jsx)("img",{src:B,alt:"eraser"})}),Object(D.jsx)("button",{onClick:ge,children:Object(D.jsx)("img",{src:I,alt:"undo"})}),Object(D.jsx)("button",{onClick:function(){N(!0)},children:Object(D.jsx)("img",{src:T,alt:"undo"})}),Object(D.jsx)("button",{onClick:function(){x&&function(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}(x.toDataURL({multiplier:3}),"startegy.png")},children:Object(D.jsx)("img",{className:"App-header-buttons-save",src:z,alt:"save"})})]})]}),Object(D.jsxs)("aside",{className:y?"enter":"",children:[Object(D.jsx)("section",{onClick:function(){N(!1)},id:"closeArea"}),Object(D.jsxs)("section",{id:"sidebar",children:[Object(D.jsxs)(De,{title:"Markers",children:[Object(D.jsx)("button",{onClick:Oe,children:Object(D.jsx)("img",{src:J,alt:"thick PMC"})}),Object(D.jsx)("button",{onClick:Oe,children:Object(D.jsx)("img",{src:K,alt:"medium PMC"})}),Object(D.jsx)("button",{onClick:Oe,children:Object(D.jsx)("img",{src:Y,alt:"light PMC"})}),Object(D.jsx)("button",{onClick:Oe,children:Object(D.jsx)("img",{src:Z,alt:"light PMC"})})]}),Object(D.jsx)(De,{title:"",children:Object(D.jsx)(l.a,{color:p,triangle:"hide",onChangeComplete:ue})})]})]}),Object(D.jsx)("div",{className:"Canvas",ref:t,tabIndex:0,children:Object(D.jsx)("canvas",{id:"canvas"})})]})},Me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,224)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))};s.a.initialize("UA-189112106-1"),s.a.pageview(window.location.pathname+window.location.search),r.a.render(Object(D.jsx)(i.a.StrictMode,{children:Object(D.jsx)(f.a,{basename:"/tarkov-debrief",children:Object(D.jsxs)(d.c,{children:[Object(D.jsx)(d.a,{path:"/app/:map",children:Object(D.jsx)(Ee,{})}),Object(D.jsx)(d.a,{path:"/",children:Object(D.jsx)(S,{})})]})})}),document.getElementById("root")),Me()}},[[222,1,2]]]);
//# sourceMappingURL=main.926661b0.chunk.js.map