(this.webpackJsonpdebrief=this.webpackJsonpdebrief||[]).push([[0],{101:function(e,t,c){},107:function(e,t){},108:function(e,t){},109:function(e,t){},217:function(e,t,c){},218:function(e,t,c){},219:function(e,t,c){},222:function(e,t,c){"use strict";c.r(t);var n=c(3),r=c(0),a=c.n(r),i=c(86),s=c.n(i),o=c(59),u=(c(101),c(55)),l=c.n(u),d=c(87),b=c(7),j=c(19),p=c(23),f=c(93),m=(c(216),c(217),c(218),c(17)),h=(c(219),c.p+"static/media/customs.e4219f37.png"),v=c.p+"static/media/interchange.d1c1fd49.png",O=c.p+"static/media/woods.1db93aa7.png",g=c.p+"static/media/labs.bf97da17.jpg",x=c.p+"static/media/reserve.074ec021.png",C=c.p+"static/media/shoreline.23bac9da.png",k=c.p+"static/media/factory.87c85dcc.jpg",w=c.p+"static/media/customs-thumbnail.b02c6216.png",y=c.p+"static/media/interchange-thumbnail.20071bd5.png",M=c.p+"static/media/woods-thumbnail.70d05156.png",D=c.p+"static/media/labs-thumbnail.b903d684.png",N=c.p+"static/media/reserve-thumbnail.a98054b0.png",A=c.p+"static/media/shoreline-thumbnail.2a773a10.png",P=c.p+"static/media/factory-thumbnail.c6017793.png",R={customs:h,interchange:v,woods:O,labs:g,reserve:x,shoreline:C,factory:k},L={customs:w,interchange:y,woods:M,labs:D,reserve:N,shoreline:A,factory:P};var S,T=function(){return Object(n.jsxs)("div",{className:"MapSelector",children:[Object(n.jsx)("header",{className:"App-header",children:Object(n.jsx)(m.b,{className:"App-header-title",to:"/",children:"Tarkov Debrief"})}),Object(n.jsx)("section",{className:"MapList",children:Object.entries(R).map((function(e){var t=Object(j.a)(e,2),c=t[0];t[1];return Object(n.jsxs)(m.b,{className:"MapList-Card",to:"/app/".concat(c),children:[Object(n.jsx)("img",{src:L[c],alt:"key"}),Object(n.jsx)("p",{children:c})]},c)}))})]})},B=c.p+"static/media/select.a36d8019.svg",E=c.p+"static/media/pencil.6f256236.svg",I=c.p+"static/media/eraser.fa7a8623.svg",z=c.p+"static/media/undo.ccba6760.svg",F=c.p+"static/media/marker.79266f62.svg",U=c.p+"static/media/save.d3fc937a.svg",Y=c.p+"static/media/pmc-thick.e9f45228.svg",K=c.p+"static/media/pmc-med.c746c927.svg",X=c.p+"static/media/pmc-light.62ae8236.svg",H=c.p+"static/media/scav.638c46be.svg",J=c(5),Z={width:300,height:300},q=new Set;var W=["pan"],G={},Q="#f00";function V(e){var t=e.title,c=e.children;return Object(n.jsxs)("div",{className:"sidebar-section",children:[Object(n.jsx)("h1",{className:"sidebar-section-title",children:t}),Object(n.jsx)("div",{className:"sidebar-section-content",children:c})]})}var $=function(){var e=Object(J.f)().map,t=Object(r.useRef)(null),c=Object(r.useRef)(!1),a=Object(r.useState)({type:"pencil",active:!0,onClick:null,onMouseMove:null,cursor:null}),i=Object(j.a)(a,2),s=i[0],o=i[1],u=Object(r.useRef)({type:"pencil",active:!0,onClick:null,onMouseMove:null,cursor:null}),h=Object(r.useRef)({type:"pencil",active:!0,onClick:null,onMouseMove:null,cursor:null}),v=Object(r.useRef)({x:0,y:0}),O=Object(r.useState)(Q),g=Object(j.a)(O,2),x=g[0],C=g[1],k=Object(r.useState)(null),w=Object(j.a)(k,2)[1],y=Object(r.useRef)(null),M=Object(r.useRef)(null),D=Object(r.useState)(!1),N=Object(j.a)(D,2),A=N[0],P=N[1],L=Object(r.useCallback)((function(e){if(void 0!==e.target&&u.current.active){if(e.target instanceof p.fabric.Image&&q.has(e.target.getSrc()))return;M.current.remove(e.target)}}),[]),T=Object(r.useCallback)((function(e){var t=M.current,c=t.viewportTransform;c[4]+=e.e.clientX-v.current.x,c[5]+=e.e.clientY-v.current.y,t.requestRenderAll(),v.current={x:e.e.clientX,y:e.e.clientY}}),[]),$=Object(r.useCallback)((function(e){var t=M.current;"Alt"===e.key&&(c.current=!0,t&&!1===s.active&&(t.isDrawingMode=!1))}),[s]),_=Object(r.useCallback)((function(e){var t=M.current;"Alt"===e.key&&(c.current=!1,t&&"pencil"===s.type&&(t.isDrawingMode=!0))}),[s]),ee=Object(r.useCallback)((function(e){if(M.current){var t=M.current;u.current.onClick&&t.off("mouse:up",u.current.onClick),u.current.onMouseMove&&t.off("mouse:move",u.current.onMouseMove),e.onClick&&t.on("mouse:up",e.onClick),e.onMouseMove&&t.on("mouse:move",e.onMouseMove),null===e.cursor?(t.defaultCursor="auto",t.hoverCursor="auto"):(t.defaultCursor=e.cursor,t.hoverCursor=t.defaultCursor),"pencil"===e.type&&!1===c.current?t.isDrawingMode=!0:t.isDrawingMode=!1}P(!1),o(e),u.current=e}),[]),te=function(e){var t,c=e.target;t=c.src,w(t),y.current=t;var n="url(".concat(c.src,"), auto");ee(Object(b.a)(Object(b.a)({},s),{},{type:"marker",onClick:ce,cursor:n}))},ce=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,n,r,a,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||!y.current){e.next=18;break}if(c=G[y.current]){e.next=8;break}return e.next=5,new Promise((function(e){return p.fabric.Image.fromURL(y.current,e)}));case 5:n=e.sent,G[y.current]=n,c=n;case 8:return e.next=10,new Promise((function(e){return c.clone(e)}));case 10:r=e.sent,a=M.current,i=a.getPointer(t.e),r.left=i.x,r.top=i.y,s=a.getZoom(),r.scale(1/s),a.add(r);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(!M.current){var c=function(){var e=new p.fabric.Canvas("canvas",{height:Z.height,width:Z.width,perPixelTargetFind:!0,selection:!1});return e.freeDrawingBrush.color=Q,e.freeDrawingBrush.width=5,e.setCursor("url(".concat(E,")")),e}();M.current=c,p.fabric.Image.fromURL(R[e],(function(e){e.canvas=c,e.selectable=!1,S=e,q.add(S.getSrc()),c.add(e),c.clearHistory()})),c.on("mouse:down",(function(e){var t=Object(b.a)(Object(b.a)({},u.current),{},{active:!0}),n=e.e;n.altKey&&!u.current.active&&(t.type="pan",t.onMouseMove=T,c.selection=!1,v.current={x:n.clientX,y:n.clientY},h.current=Object(b.a)({},u.current)),ee(t)})),c.on("mouse:up",(function(e){var t=Object(b.a)({},u.current);W.includes(u.current.type)&&(t=Object(b.a)({},h.current)),ee(Object(b.a)(Object(b.a)({},t),{},{active:!1}))})),c.on("mouse:wheel",(function(e){var t=e.e,n=t.deltaY,r=c.getZoom();(r*=Math.pow(.999,n))>20&&(r=20),r<.01&&(r=.01),c.zoomToPoint({x:t.offsetX,y:t.offsetY},r),c.freeDrawingBrush.width=5/r,e.e.preventDefault(),e.e.stopPropagation()}))}function n(){if(t.current){var e,c=t.current.offsetWidth,n=t.current.offsetHeight;null===(e=M.current)||void 0===e||e.setDimensions({width:c,height:n})}else{var r;null===(r=M.current)||void 0===r||r.setDimensions(Z)}}return n(),window.addEventListener("resize",n),document.addEventListener("keyup",(function(e){var t=e.key;e.ctrlKey&&"z"===t&&M.current&&M.current.undo()})),function(){window.removeEventListener("resize",n)}}),[t,ee,e,T]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("header",{className:"App-header",children:[Object(n.jsx)(m.b,{className:"App-header-title",to:"/",children:"Tarkov Debrief"}),Object(n.jsxs)("section",{className:"App-header-buttons",children:[Object(n.jsx)("button",{onClick:function(){(ee(Object(b.a)(Object(b.a)({},s),{},{type:"select",cursor:null,onClick:null,onMouseMove:null})),M.current)&&(M.current.selection=!0)},children:Object(n.jsx)("img",{src:B,alt:"select"})}),Object(n.jsx)("button",{onClick:function(){ee(Object(b.a)(Object(b.a)({},s),{},{type:"pencil",cursor:null,onClick:null,onMouseMove:null})),M.current},children:Object(n.jsx)("img",{src:E,alt:"pencil"})}),Object(n.jsx)("button",{onClick:function(){(ee(Object(b.a)(Object(b.a)({},s),{},{type:"eraser",cursor:null,onClick:null,onMouseMove:L})),M.current)&&(M.current.selection=!1)},children:Object(n.jsx)("img",{src:I,alt:"eraser"})}),Object(n.jsx)("button",{onClick:function(){M.current&&M.current.undo()},children:Object(n.jsx)("img",{src:z,alt:"undo"})}),Object(n.jsx)("button",{onClick:function(){P(!0)},children:Object(n.jsx)("img",{src:F,alt:"undo"})}),Object(n.jsx)("button",{onClick:function(){M.current&&function(e,t){var c=document.createElement("a");c.download=t,c.href=e,document.body.appendChild(c),c.click(),document.body.removeChild(c)}(M.current.toDataURL({multiplier:3}),"startegy.png")},children:Object(n.jsx)("img",{className:"App-header-buttons-save",src:U,alt:"save"})})]})]}),Object(n.jsxs)("aside",{className:A?"enter":"",children:[Object(n.jsx)("section",{onClick:function(){P(!1)},id:"closeArea"}),Object(n.jsxs)("section",{id:"sidebar",children:[Object(n.jsxs)(V,{title:"Markers",children:[Object(n.jsx)("button",{onClick:te,children:Object(n.jsx)("img",{src:Y,alt:"thick PMC"})}),Object(n.jsx)("button",{onClick:te,children:Object(n.jsx)("img",{src:K,alt:"medium PMC"})}),Object(n.jsx)("button",{onClick:te,children:Object(n.jsx)("img",{src:X,alt:"light PMC"})}),Object(n.jsx)("button",{onClick:te,children:Object(n.jsx)("img",{src:H,alt:"light PMC"})})]}),Object(n.jsx)(V,{title:"",children:Object(n.jsx)(f.a,{color:x,triangle:"hide",onChangeComplete:function(e){C(e.hex),M.current&&(M.current.freeDrawingBrush.color=e.hex)}})})]})]}),Object(n.jsx)("div",{className:"Canvas",ref:t,onKeyDown:$,onKeyUp:_,tabIndex:0,children:Object(n.jsx)("canvas",{id:"canvas"})})]})},_=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,224)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),r(e),a(e),i(e)}))};o.a.initialize("UA-189112106-1"),o.a.pageview(window.location.pathname+window.location.search),s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(m.a,{basename:"/tarkov-debrief",children:Object(n.jsxs)(J.c,{children:[Object(n.jsx)(J.a,{path:"/app/:map",children:Object(n.jsx)($,{})}),Object(n.jsx)(J.a,{path:"/",children:Object(n.jsx)(T,{})})]})})}),document.getElementById("root")),_()}},[[222,1,2]]]);
//# sourceMappingURL=main.fc8f5d8d.chunk.js.map